<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
</head>
<body>
  <h1>How does the Air Quality Rating work?</h1>
  <p>The air quality rating works by using a standard air quality rating scale.</p>
  <div id="mapDiv" style="width: 800px; height: 500px"></div>
  <script>
    // position we will use later
    var lat = 0;
    var lon = 0;
    // initialize map
    map = L.map('mapDiv').setView([lat, lon], 5);
    // set map tiles source
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
      maxZoom: 31,
    }).addTo(map);
    // add marker to the map
    aberdeen = L.marker([<%= @cities[0].lon %>, <%= @cities[0].lat %> ]).addTo(map);
    cardiff = L.marker([ <%= @cities[1].lon %> , <%= @cities[1].lat %>] ).addTo(map);
    edinburgh = L.marker([ <%= @cities[2].lon %>, <%= @cities[2].lat %> ] ).addTo(map);
    london = L.marker([ <%= @cities[3].lon %>, <%= @cities[3].lat %> ]).addTo(map);
    manchester = L.marker([ <%= @cities[4].lon %>, <%= @cities[4].lat %>] ).addTo(map);

    // add popup to the marker
    aberdeen.bindPopup("<b>Aberdeen</b><br/>AQI INDEX<br/><%= @cities[0].aqius %>").openPopup();
    cardiff.bindPopup("<b>Cardiff</b><br/>AQI INDEX<br/><%= @cities[1].aqius %>").openPopup();
    edinburgh.bindPopup("<b>Edinburgh</b><br/>AQI INDEX<br/><%= @cities[2].aqius %>").openPopup();
    london.bindPopup("<b>London</b><br/>AQI INDEX<br/><%= @cities[3].aqius %>").openPopup();
    manchester.bindPopup("<b>Manchester</b><br/>AQI INDEX<br/><%= @cities[4].aqius %>").openPopup();
  </script>
</body>
</html>
